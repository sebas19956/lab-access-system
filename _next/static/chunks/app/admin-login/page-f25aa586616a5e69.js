(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{1295:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(2898).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7350:function(e,r,t){Promise.resolve().then(t.bind(t,4861))},4861:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return g}});var n=t(7437),a=t(2265),i=t(4033),s=t(5754),l=t(7815);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,t(2898).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);var c=t(3067),d=t(1295),u=t(1396),m=t.n(u);let f=["laboartorio.electronica.palmira@correounivalle.edu.co","laboartorio.fisica.palmira@correounivalle.edu.co","henry.sebastian.rodriguez@correounivalle.edu.co","sr833831@gmail.com"];function g(){let[e,r]=(0,a.useState)(!1),[t,u]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[v,b]=(0,a.useState)(""),j=(0,i.useRouter)();(0,a.useEffect)(()=>{N()},[]);let N=()=>{if(!document.querySelector("#gapi-script"))try{let e=document.createElement("script");e.id="gapi-script",e.src="https://apis.google.com/js/api.js",e.async=!0,e.defer=!0,e.onerror=()=>{console.error("❌  No se pudo cargar Google API"),u(!0)},e.onload=()=>{window.gapi.load("client:auth2",async()=>{try{var e,t;let n=(e="1000729445689-i4vsajsieihjgbp5khto4aj65tb705d4.apps.googleusercontent.com",void 0!==e)?e:"";if(!n){console.warn("No se defini\xf3 NEXT_PUBLIC_GOOGLE_CLIENT_ID"),u(!0);return}await window.gapi.client.init({apiKey:(t="AIzaSyBzujymWKmJ-DJkfUDMg34deIDNiQOxR5o",void 0!==t)?t:"",clientId:n,discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],scope:"email profile"}),r(!0),x(!0);let a=window.gapi.auth2.getAuthInstance();(null==a?void 0:a.isSignedIn.get())&&y(a.currentUser.get())}catch(e){console.error("❌ Fallo la inicializaci\xf3n de gapi:",e),u(!0)}})},document.head.appendChild(e)}catch(e){console.error(e),u(!0)}},y=e=>{let r=e.getBasicProfile(),t=r.getEmail();if(!f.includes(t)){b("No tiene permisos de administrador. Contacte al administrador del sistema."),p(!1),window.gapi.auth2.getAuthInstance().signOut();return}let n={email:t,name:r.getName(),picture:r.getImageUrl(),loginTime:new Date().toISOString(),role:"admin"};localStorage.setItem("adminToken",JSON.stringify(n)),localStorage.setItem("adminEmail",t),p(!1),j.push("/admin-dashboard")};return t?(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-4 flex items-center justify-center",children:(0,n.jsx)(l.Zb,{className:"w-full max-w-md",children:(0,n.jsxs)(l.aY,{className:"p-8 text-center space-y-4",children:[(0,n.jsx)(o,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Error de Conexi\xf3n"}),(0,n.jsx)("p",{className:"text-gray-600",children:"No se pudo cargar el sistema de autenticaci\xf3n de Google."}),(0,n.jsx)(s.z,{onClick:()=>location.reload(),children:"Reintentar"})]})})}):(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-univalle-red-50 to-red-100 p-4 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"w-full max-w-md",children:[(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsxs)(m(),{href:"/",className:"inline-flex items-center text-univalle-red-600 hover:text-univalle-red-800",children:[(0,n.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Volver al Inicio"]})}),(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{className:"text-center",children:[(0,n.jsx)("div",{className:"mx-auto w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:(0,n.jsx)(o,{className:"h-6 w-6 text-univalle-red-600"})}),(0,n.jsx)(l.ll,{children:"Acceso Administrativo"}),(0,n.jsx)(l.SZ,{children:"Autenticaci\xf3n con Google para administradores autorizados"})]}),(0,n.jsx)(l.aY,{children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,n.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Administradores Autorizados:"}),(0,n.jsxs)("ul",{className:"text-xs text-blue-700 space-y-1",children:[(0,n.jsx)("li",{children:"• Laboratorio Electr\xf3nica Palmira"}),(0,n.jsx)("li",{children:"• Laboratorio F\xedsica Palmira"}),(0,n.jsx)("li",{children:"• Henry Sebasti\xe1n Rodr\xedguez"}),(0,n.jsx)("li",{children:"• Administrador del Sistema"})]})]}),(0,n.jsx)("div",{className:"text-center",children:e?(0,n.jsx)(s.z,{onClick:()=>{if(!g){b("Google API a\xfan no est\xe1 lista. Int\xe9ntalo de nuevo en unos segundos.");return}p(!0),b("");let e=window.gapi.auth2.getAuthInstance();if(!e){b("No se pudo inicializar la autenticaci\xf3n de Google."),p(!1);return}e.signIn().then(y).catch(e=>{console.error("Error en autenticaci\xf3n:",e),b("Error al autenticar con Google"),p(!1)})},className:"w-full flex items-center gap-2 bg-univalle-red-600 hover:bg-univalle-red-700",disabled:h,children:h?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Verificando..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{className:"h-4 w-4"}),"Iniciar Sesi\xf3n con Google"]})}):(0,n.jsxs)("div",{className:"flex items-center justify-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-univalle-red-600"}),(0,n.jsx)("span",{className:"ml-2",children:"Cargando autenticaci\xf3n..."})]})}),v&&(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,n.jsx)("p",{className:"text-sm text-red-700",children:v})}),(0,n.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,n.jsx)("h4",{className:"font-medium text-yellow-900 mb-2",children:"Seguridad:"}),(0,n.jsxs)("ul",{className:"text-xs text-yellow-700 space-y-1",children:[(0,n.jsx)("li",{children:"• Solo cuentas autorizadas pueden acceder"}),(0,n.jsx)("li",{children:"• Autenticaci\xf3n segura con Google OAuth"}),(0,n.jsx)("li",{children:"• Sesiones con tiempo de expiraci\xf3n"})]})]})]})})]})]})})}},5754:function(e,r,t){"use strict";t.d(r,{z:function(){return c}});var n=t(7437),a=t(2265),i=t(7256),s=t(6061),l=t(1657);let o=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,r)=>{let{className:t,variant:a,size:s,asChild:c=!1,...d}=e,u=c?i.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(o({variant:a,size:s,className:t})),ref:r,...d})});c.displayName="Button"},7815:function(e,r,t){"use strict";t.d(r,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return s},aY:function(){return d},ll:function(){return o}});var n=t(7437),a=t(2265),i=t(1657);let s=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});s.displayName="Card";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},1657:function(e,r,t){"use strict";t.d(r,{cn:function(){return i}});var n=t(7042),a=t(4769);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,n.W)(r))}},4033:function(e,r,t){e.exports=t(5313)}},function(e){e.O(0,[250,583,971,938,744],function(){return e(e.s=7350)}),_N_E=e.O()}]);